{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-10-07 07:02:02.876771",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Inward",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{# Compact Inward Receipt - single-page friendly, footer pinned #}\n<style>\n  @page { size: A4; margin: 6mm 8mm; } /* smaller page margins to gain space */\n  html, body { height: 100%; margin: 0; padding: 0; font-family: Arial, sans-serif; color:#000; }\n  .wrap { position: relative; min-height: 100%; padding-bottom: 78px; /* reserve footer height */ }\n  /* Global small font & compact spacing */\n  body, table, th, td, div { font-size: 10.5px; line-height:1.05; }\n  table { width:100%; border-collapse: collapse; }\n  th, td { padding: 4px 6px; vertical-align: middle; }\n  th { background: #f6f6f6; font-weight:700; }\n  .no-border td { border: none; padding: 2px 4px; }\n  .border td, .border th { border: 1px solid #222; }\n  .center { text-align:center; }\n  .left { text-align:left; }\n  .right { text-align:right; }\n  .section-title { font-weight:700; margin:6px 0 4px 0; }\n  /* Make tables compact and try to avoid page-breaks inside */\n  .item-table, .deduction-table { page-break-inside: avoid; -webkit-column-break-inside: avoid; -moz-page-break-inside: avoid; }\n  .border { page-break-inside: avoid; }\n  /* Header compact */\n  .hdr-logo { max-height:44px; display:block; }\n  .hdr-company { font-size:12.5px; font-weight:800; }\n  .hdr-addr { font-size:10px; margin-top:2px; }\n  /* Footer pinned at bottom of page (fixed within reserved space) */\n  .footer {\n    position: absolute;\n    bottom: 8mm;\n    left: 8mm;\n    right: 8mm;\n    height: 60px;\n    font-size:10px;\n  }\n  .signature-box { text-align:center; padding-top:8px; }\n  /* small helpers */\n  .muted { color:#333; font-size:10px; }\n  .highlight { font-weight:700; background:#f3f3f3; }\n  /* reduce word-wrapping for product names/fields to save vertical space */\n  .nowrap { white-space:nowrap; }\n</style>\n\n{% set comp = None %}\n{% if doc.company %}\n  {% set comp = frappe.get_doc('Company', doc.company) %}\n{% endif %}\n\n{% set customer_name = frappe.db.get_value('Customer', doc.customer, 'first_name') if doc.customer else '' %}\n{% set broker_name = frappe.db.get_value('Broker', doc.broker, 'first_name') if doc.broker else '' %}\n{% set warehouse_name = frappe.db.get_value('Warehouse', doc.warehouse, 'warehouse_name') if doc.warehouse else '' %}\n\n<div class=\"wrap\">\n  <!-- HEADER -->\n  <table class=\"no-border\">\n    <tr>\n      <td style=\"width:16%;\">\n        {% if comp and comp.get('logo') %}\n          <img class=\"hdr-logo\" src=\"{{ frappe.utils.get_url() }}{{ comp.get('logo') }}\">\n        {% endif %}\n      </td>\n      <td style=\"width:64%;\" class=\"center\">\n        <div class=\"hdr-company\">{{ comp.get('company_name') if comp else (doc.company or '') }}</div>\n        <div class=\"hdr-addr\">\n          {% if comp %}\n            {{ comp.get('address') or '' }}{% if comp.get('city') %}, {{ comp.get('city') }}{% endif %}{% if comp.get('state') %}, {{ comp.get('state') }}{% endif %}{% if comp.get('pincode') %} - {{ comp.get('pincode') }}{% endif %}\n          {% endif %}\n        </div>\n      </td>\n      <td style=\"width:20%;\" class=\"left\">\n        <div class=\"muted\"><b>GSTIN:</b> {{ comp.get('gstin') if comp else '' }}</div>\n        <div class=\"muted\"><b>Phone:</b> {{ comp.get('phone') if comp else '' }}</div>\n      </td>\n    </tr>\n  </table>\n\n  <div class=\"center\" style=\"font-size:12px; font-weight:700; margin-top:6px; margin-bottom:6px;\">INWARD RECEIPT / PURCHASE SETTLEMENT ADVICE</div>\n\n  <!-- VENDOR / DOC INFO -->\n  <table class=\"no-border\">\n    <tr>\n      <td style=\"width:50%;\" class=\"left\">\n        <b>Customer:</b> {{ customer_name }}<br>\n        <b>Vendor GSTIN:</b> {{ doc.vendor_gstin or '' }}<br>\n        <b>Broker:</b> {{ broker_name }}\n      </td>\n      <td style=\"width:50%;\" class=\"left\">\n        <b>Invoice No:</b> {{ doc.inward_invoice_no or doc.name }}<br>\n        <b>Warehouse:</b> {{ warehouse_name }}<br>\n        <b>Bill Date:</b> {{ frappe.utils.format_datetime(doc.bill_date) if doc.bill_date else '' }}<br>\n        <b>Arrival Date:</b> {{ frappe.utils.format_datetime(doc.arrival_date) if doc.arrival_date else '' }}\n      </td>\n    </tr>\n  </table>\n\n  <!-- ITEM DETAILS -->\n  <div class=\"section-title\">Item Details</div>\n  <table class=\"border item-table\">\n    <thead>\n      <tr>\n        <th style=\"width:4%;\">Sr</th>\n        <th style=\"width:26%;\">Item Name</th>\n        <th style=\"width:8%;\">HSN</th>\n        <th style=\"width:10%;\">Bag Type</th>\n        <th style=\"width:8%;\">No. of Bags</th>\n        <th style=\"width:12%;\">Gross Wt (kg)</th>\n        <th style=\"width:12%;\">Arr. Wt (kg)</th>\n        <th style=\"width:10%;\">Rate (Qtl)</th>\n        <th style=\"width:10%;\">Amount</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for row in doc.inward_items %}\n      {% set bags = frappe.utils.flt(row.item_bags or 0) %}\n      {% set gross = frappe.utils.flt(row.item_gross_weight or 0) %}\n      {% set arrw = frappe.utils.flt(row.item_arrival_weight or 0) %}\n      {% set rate = frappe.utils.flt(row.item_rate or 0) %}\n      {% set amt = frappe.utils.flt(row.item_amount or 0) %}\n      {% set prod_name = frappe.db.get_value('Product', doc.product, 'product_name') if doc.product else '' %}\n      {% set hsn_val = frappe.db.get_value('Product', doc.product, 'hsn_code') if doc.product else '' %}\n      <tr>\n        <td class=\"center nowrap\">{{ loop.index }}</td>\n        <td class=\"left\" style=\"padding-left:6px;\">{{ prod_name }}</td>\n        <td class=\"center nowrap\">{{ hsn_val }}</td>\n        <td class=\"left nowrap\">{{ row.item_bag_type or '' }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % bags }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % gross }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % arrw }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % rate }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % amt }}</td>\n      </tr>\n      {% endfor %}\n\n      {% set total_bags = frappe.utils.flt(doc.inward_total_bags or 0) %}\n      {% set total_gross = frappe.utils.flt(doc.total_gross_weight or 0) %}\n      {% set total_arr = frappe.utils.flt(doc.total_arrival_weight or 0) %}\n      {% set total_amt = frappe.utils.flt(doc.total_amount or 0) %}\n      <tr class=\"highlight\">\n        <td colspan=\"4\" class=\"right\"><b>Total</b></td>\n        <td class=\"right nowrap\">{{ '%.2f' % total_bags }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % total_gross }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % total_arr }}</td>\n        <td></td>\n        <td class=\"right nowrap\">{{ '%.2f' % total_amt }}</td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- DEDUCTIONS -->\n  <div class=\"section-title\">Deductions</div>\n  <table class=\"border deduction-table\" style=\"margin-bottom:6px;\">\n    <thead>\n      <tr>\n        <th style=\"width:4%;\">Sr</th>\n        <th style=\"width:46%;\">Particulars</th>\n        <th style=\"width:12%;\">Required</th>\n        <th style=\"width:12%;\">Actual</th>\n        <th style=\"width:12%;\">Difference</th>\n        <th style=\"width:14%;\">Amount</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for row in doc.deductions %}\n      {% set req = frappe.utils.flt(row.required_value or 0) %}\n      {% set act = frappe.utils.flt(row.actual_value or 0) %}\n      {% set diff = frappe.utils.flt(row.difference_value or 0) %}\n      {% set damt = frappe.utils.flt(row.deduction_amount or 0) %}\n      <tr>\n        <td class=\"center nowrap\">{{ loop.index }}</td>\n        <td class=\"left\" style=\"padding-left:6px;\">{{ row.deduction_type or '' }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % req }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % act }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % diff }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % damt }}</td>\n      </tr>\n      {% endfor %}\n      {% set total_ded = frappe.utils.flt(doc.total_deductions or 0) %}\n      <tr class=\"highlight\">\n        <td colspan=\"5\" class=\"right\"><b>Total Deductions</b></td>\n        <td class=\"right nowrap\">{{ '%.2f' % total_ded }}</td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- DEBIT NOTE DETAILS -->\n  {% if doc.debit_note and doc.debit_note|length > 0 %}\n  <div class=\"section-title\">Debit Note Details</div>\n  <table class=\"border deduction-table\" style=\"margin-bottom:6px;\">\n    <thead>\n      <tr>\n        <th style=\"width:4%;\">Sr</th>\n        <th style=\"width:60%;\">Particulars</th>\n        <th style=\"width:18%;\">Deducted Weight (Kg)</th>\n        <th style=\"width:18%;\">Amount</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for row in doc.debit_note %}\n      {% set weight = frappe.utils.flt(row.deducted_weight_kg or 0) %}\n      {% set amt = frappe.utils.flt(row.amount or 0) %}\n      <tr>\n        <td class=\"center nowrap\">{{ loop.index }}</td>\n        <td class=\"left\" style=\"padding-left:6px;\">{{ row.particulars or '' }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % weight }}</td>\n        <td class=\"right nowrap\">{{ '%.2f' % amt }}</td>\n      </tr>\n      {% endfor %}\n      {% set total_debit_amount = doc.debit_note|sum(attribute='amount') or 0 %}\n      <tr class=\"highlight\">\n        <td colspan=\"3\" class=\"right\"><b>Total Debit Amount</b></td>\n        <td class=\"right nowrap\"><b>{{ '%.2f' % total_debit_amount }}</b></td>\n      </tr>\n    </tbody>\n  </table>\n  {% endif %}\n\n  <!-- GST CALCULATION SECTION - left side -->\n  {% if doc.debit_note and doc.debit_note|length > 0 %}\n  {% set app_settings = frappe.get_doc('App Settings', 'App Settings') %}\n  {% set basic_value_net_tds = doc.debit_note|sum(attribute='amount') or 0 %}\n  {% set cgst_amount = frappe.utils.flt(doc.cgst_amount or 0) %}\n  {% set sgst_amount = frappe.utils.flt(doc.sgst_amount or 0) %}\n  {% set igst_amount = frappe.utils.flt(doc.igst_amount or 0) %}\n  {% set cgst_rate = frappe.utils.flt(app_settings.debit_note_cgst_rate or 2.5) %}\n  {% set sgst_rate = frappe.utils.flt(app_settings.debit_note_sgst_rate or 2.5) %}\n  {% set igst_rate = frappe.utils.flt(app_settings.debit_note_igst_rate or 5.0) %}\n  \n  {% set gst_amount = 0 %}\n  {% if (cgst_amount > 0) or (sgst_amount > 0) %}\n    {% set gst_amount = basic_value_net_tds * (cgst_rate + sgst_rate) / 100 %}\n  {% elif (cgst_amount == 0) and (sgst_amount == 0) and (igst_amount > 0) %}\n    {% set gst_amount = basic_value_net_tds * igst_rate / 100 %}\n  {% endif %}\n  \n  {% set net_payable = basic_value_net_tds + gst_amount %}\n  \n  <table class=\"no-border\" style=\"width:46%; float:left; margin-top:4px;\">\n    <tr><td class=\"left\"><b>Document:</b></td><td class=\"right nowrap\">Debit Note</td></tr>\n    <tr><td class=\"left\"><b>Basic Value Net of TDS:</b></td><td class=\"right nowrap\">\u20b9{{ '%.2f' % basic_value_net_tds }}</td></tr>\n    <tr><td class=\"left\"><b>GST Amount:</b></td><td class=\"right nowrap\">\u20b9{{ '%.2f' % gst_amount }}</td></tr>\n    <tr class=\"highlight\"><td class=\"left\"><b>Net Payable:</b></td><td class=\"right nowrap\"><b>\u20b9{{ '%.2f' % net_payable }}</b></td></tr>\n  </table>\n  {% endif %}\n\n  <!-- GST / SUMMARY - right aligned, compact -->\n  <table class=\"no-border\" style=\"width:46%; float:right; margin-top:4px;\">\n    <tr><td class=\"left\">CGST ({{ doc.cgst_percent or 0 }}%)</td><td class=\"right nowrap\">{{ '%.2f' % (frappe.utils.flt(doc.cgst_amount or 0)) }}</td></tr>\n    <tr><td class=\"left\">SGST ({{ doc.sgst_percent or 0 }}%)</td><td class=\"right nowrap\">{{ '%.2f' % (frappe.utils.flt(doc.sgst_amount or 0)) }}</td></tr>\n    <tr><td class=\"left\">IGST ({{ doc.igst_percent or 0 }}%)</td><td class=\"right nowrap\">{{ '%.2f' % (frappe.utils.flt(doc.igst_amount or 0)) }}</td></tr>\n    <tr class=\"highlight\"><td class=\"left\"><b>Net Total</b></td><td class=\"right nowrap\"><b>{{ '%.2f' % (frappe.utils.flt(doc.net_total or 0)) }}</b></td></tr>\n  </table>\n  <div style=\"clear:both;\"></div>\n\n  <!-- Footer (pinned) -->\n  <div class=\"footer\">\n    <table class=\"no-border\" style=\"width:100%;\">\n      <tr>\n        <td style=\"width:68%; vertical-align:top; font-size:10px;\">\n          <i>This settlement advice is final. In case of any dispute it should be intimated within 5 days from the advice date.</i>\n          <div style=\"margin-top:6px;\">\n            <b>Printed By:</b> {{ frappe.session.user }}<br>\n            <b>Printed On:</b> {{ frappe.utils.format_datetime(frappe.utils.now_datetime()) }}\n          </div>\n        </td>\n        <td style=\"width:32%; vertical-align:bottom;\" class=\"signature-box\">\n          <div style=\"height:38px;\"></div>\n          <div><b>Authorized Signatory</b></div>\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-10-07 07:58:07.270968",
 "modified_by": "Administrator",
 "module": "inwards",
 "name": "Inward Receipt",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "No"
}